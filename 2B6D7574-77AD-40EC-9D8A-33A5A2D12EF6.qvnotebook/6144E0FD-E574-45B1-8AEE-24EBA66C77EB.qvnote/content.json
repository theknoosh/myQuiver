{
  "title": "Blocks",
  "cells": [
    {
      "type": "code",
      "language": "objectivec",
      "data": "- (void)requestProductsWithCompletion:(IAPProductsResponseBlock)completion {\n    \n    self.request = [[SKProductsRequest alloc] initWithProductIdentifiers:_productIdentifiers];\n    _request.delegate = self;\n    self.requestProductsBlock = completion;\n    \n    [_request start];\n    \n}"
    },
    {
      "type": "code",
      "language": "objectivec",
      "data": "    [[IAPShare sharedHelper].iap requestProductsWithCompletion:^(SKProductsRequest* request,SKProductsResponse* response)\n     {\n         if(response > 0 ) {\n             SKProduct* product =[[IAPShare sharedHelper].iap.products objectAtIndex:0];\n             \n             NSLog(@\"%@\",product.localizedTitle);\n             \n             \n//             // Restore previous purchase\n//             [[IAPShare sharedHelper].iap restoreProductsWithCompletion:^(SKPaymentQueue *payment, NSError *error) {\n//                 \n//                 //check with SKPaymentQueue\n//                 \n//                 // number of restore count\n//                 int numberOfTransactions = payment.transactions.count;\n//                 \n//                 for (SKPaymentTransaction *transaction in payment.transactions)\n//                 {\n//                     NSString *purchased = transaction.payment.productIdentifier;\n//                     if([purchased isEqualToString:@\"com.sanctuaryofdarkness.MechBot.MoreBots\"])\n//                     {\n//                         //enable the product here\n//                     }\n//                 }\n//                 \n//             }];\n             \n                // Buy Product\n//             [[IAPShare sharedHelper].iap buyProduct:product\n//                                        onCompletion:^(SKPaymentTransaction* trans){\n//                                            \n//                                            if(trans.error)\n//                                            {\n//                                                NSLog(@\"Fail %@\",[trans.error localizedDescription]);\n//                                            }\n//                                            else if(trans.transactionState == SKPaymentTransactionStatePurchased) {\n//                                                \n//                                                [[IAPShare sharedHelper].iap checkReceipt:trans.transactionReceipt AndSharedSecret:@\"your sharesecret\" onCompletion:^(NSString *response, NSError *error) {\n//                                                    \n//                                                    //Convert JSON String to NSDictionary\n//                                                    NSDictionary* rec = [IAPShare toJSON:response];\n//                                                    \n//                                                    if([rec[@\"status\"] integerValue]==0)\n//                                                    {\n//                                                        \n//                                                        [[IAPShare sharedHelper].iap provideContentWithTransaction:trans];\n//                                                        NSLog(@\"SUCCESS %@\",response);\n//                                                        NSLog(@\"Pruchases %@\",[IAPShare sharedHelper].iap.purchasedProducts);\n//                                                    }\n//                                                    else {\n//                                                        NSLog(@\"Fail\");\n//                                                    }\n//                                                }];\n//                                            }\n//                                            else if(trans.transactionState == SKPaymentTransactionStateFailed) {\n//                                                NSLog(@\"Fail\");\n//                                            }\n//                                        }];//end of buy product\n             \n\n         }\n     }];\n"
    }
  ]
}